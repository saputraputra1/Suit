<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Suit Battle Online - Bella & Putra</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <style>
    body { font-family: Arial; background: #111; color: #fff; text-align: center; padding: 20px; }
    input, button { padding: 10px; margin: 5px; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <div id="loginBox">
    <h2>Login Mabar Private</h2>
    <input id="username" placeholder="Username" /><br/>
    <input id="password" type="password" placeholder="Password" /><br/>
    <button onclick="login()">Login</button>
  </div>

  <div id="gameBox" class="hidden">
    <h2>Suit Battle: <span id="youName"></span> vs <span id="enemyName"></span></h2>
    <p>Saldo: <span id="yourSaldo">1000</span></p>
    <p>Status: <span id="statusText">Menunggu...</span></p>
    <button onclick="choose('batu')">ğŸª¨ Batu</button>
    <button onclick="choose('gunting')">âœ‚ï¸ Gunting</button>
    <button onclick="choose('kertas')">ğŸ“„ Kertas</button>
    <div id="result" style="margin-top:10px;"></div>
  </div>

  <script>
    // âœ… Firebase Config
    const firebaseConfig = {
  apiKey: "AIzaSyCxOh9gSsp6KgBMhOVQ5KNqy-5KUWHkFm0",
  authDomain: "suit-online-a0ec5.firebaseapp.com",
  projectId: "suit-online-a0ec5",
  storageBucket: "suit-online-a0ec5.firebasestorage.app",
  messagingSenderId: "306492434790",
  appId: "1:306492434790:web:933bddc665938dc81d00a7",
  measurementId: "G-30WX96VQBN"
}

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let user = "";
    let opponent = "";
    const room = "room_bella_putra";
    let saldo = 1000;

    function login() {
      const u = document.getElementById("username").value.trim();
      const p = document.getElementById("password").value.trim();

      if ((u === "putra" && p === "12345") || (u === "bella" && p === "12345")) {
        user = u;
        opponent = u === "putra" ? "bella" : "putra";
        document.getElementById("loginBox").classList.add("hidden");
        document.getElementById("gameBox").classList.remove("hidden");
        document.getElementById("youName").innerText = user;
        document.getElementById("enemyName").innerText = opponent;
        listenGame();
        resetChoice();
      } else {
        alert("Login gagal! Hanya untuk Bella & Putra â¤ï¸");
      }
    }

    function choose(pilihan) {
      db.ref(`${room}/${user}`).set({ choice: pilihan, saldo: saldo });
      document.getElementById("statusText").innerText = "Menunggu lawan memilih...";
    }

    function listenGame() {
      db.ref(`${room}`).on("value", (snap) => {
        const data = snap.val();
        if (!data) return;

        const my = data[user];
        const enemy = data[opponent];

        if (my && enemy && my.choice && enemy.choice) {
          const hasil = hitungHasil(my.choice, enemy.choice);
          let teks = `Kamu: ${my.choice} vs ${enemy.choice}<br/>`;

          if (hasil === "menang") {
            saldo += 100;
            teks += "âœ… Kamu Menang!";
          } else if (hasil === "kalah") {
            saldo -= 100;
            teks += "âŒ Kamu Kalah!";
          } else {
            teks += "ğŸ¤ Seri!";
          }

          document.getElementById("result").innerHTML = teks;
          document.getElementById("yourSaldo").innerText = saldo;
          document.getElementById("statusText").innerText = "Main lagi yuk!";
          resetChoice();
        }
      });
    }

    function resetChoice() {
      setTimeout(() => {
        db.ref(`${room}/putra`).set(null);
        db.ref(`${room}/bella`).set(null);
      }, 3000);
    }

    function hitungHasil(kamu, dia) {
      if (kamu === dia) return "seri";
      if (
        (kamu === "batu" && dia === "gunting") ||
        (kamu === "gunting" && dia === "kertas") ||
        (kamu === "kertas" && dia === "batu")
      ) return "menang";
      return "kalah";
    }
  </script>
</body>
</html>
